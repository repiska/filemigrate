# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è logger.py

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `logger.py` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è File Migrator —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ü–≤–µ—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞, —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —Å —ç–º–æ–¥–∑–∏
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```python
from src.config_loader import load_config
from src.logger import setup_logger

# –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
config = load_config()
logger = setup_logger(config.logging)

# –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logger.info("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ")
logger.warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
logger.error("–û—à–∏–±–∫–∞")
```

## –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

```python
from src.logger import FileMigratorLogger

migrator_logger = FileMigratorLogger(config.logging)

# –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏
migrator_logger.log_migration_start(total_files=1000, batch_size=100)

# –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
migrator_logger.log_file_moved("file001", Path("old/path"), Path("new/path"))

# –ü—Ä–æ–≥—Ä–µ—Å—Å
migrator_logger.log_progress(current=50, total=100)

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
migrator_logger.log_migration_end(processed=100, successful=95, failed=5)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π

```python
# –ù–∞—á–∞–ª–æ –±–∞—Ç—á–∞
migrator_logger.log_batch_start(batch_number=1, batch_size=50)

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –±–∞—Ç—á–∞
migrator_logger.log_batch_end(batch_number=1, processed=50, successful=48, failed=2)
```

### –û—à–∏–±–∫–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
# –û—à–∏–±–∫–∞ —Ñ–∞–π–ª–∞
migrator_logger.log_file_error("file001", FileNotFoundError("File not found"))

# –û—à–∏–±–∫–∞ –ë–î
migrator_logger.log_database_error("SELECT", ConnectionError("Connection failed"))

# –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
migrator_logger.log_file_operation("read", Path("file.txt"), success=True)
migrator_logger.log_file_operation("write", Path("file.txt"), success=False)

# –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
migrator_logger.log_system_info("–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞")
migrator_logger.log_warning("–ù–∏–∑–∫–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ")
migrator_logger.log_critical_error("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞", RuntimeError("System failure"))
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LoggingConfig

```python
from src.config_loader import LoggingConfig
from pathlib import Path

config = LoggingConfig(
    level='INFO',                    # DEBUG, INFO, WARNING, ERROR, CRITICAL
    log_file=Path('logs/app.log'),   # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤
    max_log_size=10,                 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (MB)
    backup_count=5                   # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏
)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ settings.ini

```ini
[logging]
level = INFO
log_file = logs/migrator.log
max_log_size = 10
backup_count = 5
```

## –§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (—Å —Ü–≤–µ—Ç–∞–º–∏ –∏ —ç–º–æ–¥–∑–∏)
```
2025-09-18 01:43:58 [INFO] file_migrator: ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2025-09-18 01:43:58 [WARNING] file_migrator: ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
2025-09-18 01:43:58 [ERROR] file_migrator: ‚ùå –û—à–∏–±–∫–∞
2025-09-18 01:43:58 [CRITICAL] file_migrator: üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
```

### –§–∞–π–ª–æ–≤—ã–π –≤—ã–≤–æ–¥ (–±–µ–∑ —Ü–≤–µ—Ç–æ–≤)
```
2025-09-18 01:43:58 [INFO] file_migrator: ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2025-09-18 01:43:58 [WARNING] file_migrator: ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
2025-09-18 01:43:58 [ERROR] file_migrator: ‚ùå –û—à–∏–±–∫–∞
2025-09-18 01:43:58 [CRITICAL] file_migrator: üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
```

## –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è
- üöÄ –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤, —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞)
- ‚è∞ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- üìÅ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –û–ø–µ—Ä–∞—Ü–∏–∏
- üì¶ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π
- üóÑÔ∏è –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- üìÅ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
- ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ÑπÔ∏è –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚ùå –û—à–∏–±–∫–∏
- üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

## –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

–õ–æ–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞:

- `migrator.log` - —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª
- `migrator.log.1` - –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ñ–∞–π–ª
- `migrator.log.2` - —Ñ–∞–π–ª –Ω–∞ 2 –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–∑–∞–¥
- –∏ —Ç.–¥.

## –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

- **DEBUG**: –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **INFO**: –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ
- **WARNING**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **ERROR**: –û—à–∏–±–∫–∏
- **CRITICAL**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –º–∏–≥—Ä–∞—Ü–∏–∏

```python
from src.config_loader import load_config
from src.logger import FileMigratorLogger

config = load_config()
logger = FileMigratorLogger(config.logging)

try:
    # –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏
    logger.log_migration_start(1000, 100)
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
    for i in range(10):
        logger.log_batch_start(i+1, 100)
        
        # –°–∏–º—É–ª—è—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        for j in range(100):
            if j % 10 == 0:
                logger.log_progress(i*100 + j, 1000)
            
            if j % 50 == 0:
                logger.log_file_moved(f"file{j}", Path("old"), Path("new"))
        
        logger.log_batch_end(i+1, 100, 98, 2)
    
    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    logger.log_migration_end(1000, 980, 20)
    
except Exception as e:
    logger.log_critical_error("–û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏", e)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
try:
    # –û–ø–µ—Ä–∞—Ü–∏—è —Å —Ñ–∞–π–ª–æ–º
    with open("file.txt", "r") as f:
        content = f.read()
    logger.log_file_operation("read", Path("file.txt"), True)
    
except FileNotFoundError as e:
    logger.log_file_error("file.txt", e)
except Exception as e:
    logger.log_critical_error("–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞", e)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
python -m pytest tests/test_logger.py -v
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- –¶–≤–µ—Ç–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–≥–µ—Ä–∞
- –í—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –†–æ—Ç–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤
- –†–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
